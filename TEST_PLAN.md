# Fairfield Airport Car Service â€“ Test Plan

_Last updated: <!--DATE_AUTOGENERATED-->_

> Goal: Provide a checklist of **what to verify before each release**.  Tests are grouped by layer and tagged for Manual (ğŸ–ï¸) vs Automated (ğŸ¤–) coverage.

---

## 1. Happy-Path Booking Flow (End-to-End)

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
| 1 | New ride booking | Fill booking form â†’ submit â†’ redirected to Square checkout â†’ pay deposit | Success page shows _Pending Confirmation_ status | ğŸ–ï¸ / ğŸ¤– |
| 2 | Webhook confirmation | After payment, Square webhook hits `/api/square-webhook` | Booking `status` flips to **confirmed** in Firestore; `/status/[id]` UI updates | ğŸ¤– |

## 2. Address Autocomplete

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
| 3 | Debounced suggestions | Type "500 Main St, Fairfield" slowly | Dropdown shows suggestions after ~300 ms; no excessive network calls | ğŸ–ï¸ |
| 4 | Nationwide coverage | Enter "1600 Pennsylvania Avenue" | White House address appears | ğŸ–ï¸ |

## 3. Fare Estimation

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
| 5 | Base fare calc | Origin A â†’ B (5 mi, 10 min) | Fare = `BASE_FARE + 5*3.5 + 10*0.5` rounded up | ğŸ–ï¸ / Unit |
| 6 | Long-distance | 100 mi trip | No overflow; reasonable fare returned | Unit |

## 4. Scheduling & Overlap Logic

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
| 7 | Overlap reject | Book ride 8-10 AM, then 9-11 AM | Second request auto-blocked | Unit / ğŸ¤– |
| 8 | Buffer time | Book 8-9 AM, then 9-15 AM with 60 min buffer | Second request blocked | Unit |

## 5. Cancellation Policy

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
| 9 | Cancel >24 h | Cancel ride 2 days before | Full refund; status `cancelled` | ğŸ–ï¸ |
| 10 | Cancel 6 h before | 50 % fee retained | Refund amount correct | ğŸ–ï¸ |
| 11 | No-show | Cancel <3 h | No refund | ğŸ–ï¸ |

## 6. Communications

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
|12| Confirmation SMS | Complete booking | Rider receives confirmation SMS with details | ğŸ–ï¸ |
|13| Reminder SMS | 24 h before pickup (use time-travel in tests) | Reminder sent | ğŸ¤– |
|14| Feedback SMS | Mark ride completed | Feedback link SMS sent | ğŸ¤– |

## 7. Admin Dashboard

| # | Scenario | Steps | Expected Result | Type |
|---|----------|-------|-----------------|------|
|15| Login guard | Hit `/admin/bookings` while logged out | Redirect to `/admin/login` | ğŸ–ï¸ / ğŸ¤– |
|16| Booking list | After login | Table lists all bookings chronologically | ğŸ–ï¸ |

## 8. UI & Responsiveness

- ğŸ“± **Mobile (360 Ã— 640)** â€“ Booking form fields stack nicely; buttons finger-friendly
- ğŸ’» **Desktop (1440 Ã— 900)** â€“ No unused whitespace
- ğŸŒ™ **Dark mode** â€“ (when implemented) text remains readable

## 9. Performance & Security

| Check | Metric | Target |
|-------|--------|--------|
| Lighthouse mobile perf | Score | â‰¥ 80 |
| Vercel build | No ESLint errors, TypeScript passes | âœ… |
| Env vars | No secret leaked in client bundle except `NEXT_PUBLIC_` keys | âœ… |

## 10. Regression Suite (Post-MVP)

- Return-trip flow
- Loyalty / coupon code application
- Spanish i18n toggle
- Driver tracking map link

## 11. Automation Notes

- **Unit tests** â€“ Jest â†’ utilities (`fare`, scheduling overlap, webhook validator)
- **Integration** â€“ Supertest against API routes (`estimate-fare`, `places-autocomplete`)
- **E2E** â€“ Playwright: happy-path booking â†’ payment stub â†’ webhook simulation

---

### How to Use This Document
1. Mark each ğŸ–ï¸ manual case as _âœ“ passed_ or _âœ— failed_ during release QA.
2. Add new rows when features are added (and reference the section in your PR).
3. Tag tests with `ğŸ¤–` only when theyâ€™re truly automated in CI; otherwise leave ğŸ–ï¸.

_Letâ€™s keep quality high as we ship fast!_ 